#!/bin/bash
# SM_2D Simulation Runner
# Runs simulation using sim.ini from current directory

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
EXECUTABLE="$SCRIPT_DIR/build/run_simulation"
CONFIG_FILE="${1:-sim.ini}"

# Check if executable exists
if [ ! -f "$EXECUTABLE" ]; then
    echo "Error: Executable not found at $EXECUTABLE"
    echo "Please build the project first:"
    echo "  cd build && cmake .. && make"
    exit 1
fi

# Check if config file exists
if [ ! -f "$CONFIG_FILE" ]; then
    echo "Error: Config file not found: $CONFIG_FILE"
    exit 1
fi

# Run simulation
echo "Running simulation with config: $CONFIG_FILE"
"$EXECUTABLE" "$CONFIG_FILE"
